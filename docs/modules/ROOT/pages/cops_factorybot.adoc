////
  Do NOT edit this file by hand directly, as it is automatically generated.

  Please make any necessary changes to the cop documentation within the source files themselves.
////

= FactoryBot

[#factorybotassociationstyle]
== FactoryBot/AssociationStyle

|===
| Enabled by default | Safe | Supports autocorrection | Version Added | Version Changed

| Pending
| No
| Always (Unsafe)
| 2.23
| 2.24
|===

Use a consistent style to define associations.

[#safety-factorybotassociationstyle]
=== Safety

This cop may cause false-positives in `EnforcedStyle: explicit`
case. It recognizes any method call that has no arguments as an
implicit association but it might be a user-defined trait call.

[#examples-factorybotassociationstyle]
=== Examples

[#_enforcedstyle_-implicit_-_default_-factorybotassociationstyle]
==== `EnforcedStyle: implicit` (default)

[source,ruby]
----
# bad
factory :post do
  association :user
end

# good
factory :post do
  user
end

# bad
factory :post do
  association :user, :author
end

# good
factory :post do
  user factory: %i[user author]
end
----

[#_enforcedstyle_-explicit_-factorybotassociationstyle]
==== `EnforcedStyle: explicit`

[source,ruby]
----
# bad
factory :post do
  user
end

# good
factory :post do
  association :user
end

# bad
factory :post do
  user factory: %i[user author]
end

# good
factory :post do
  association :user, :author
end

# good (NonImplicitAssociationMethodNames: ['email'])
sequence :email do |n|
  "person#{n}@example.com"
end

factory :user do
  email
end
----

[#configurable-attributes-factorybotassociationstyle]
=== Configurable attributes

|===
| Name | Default value | Configurable values

| EnforcedStyle
| `implicit`
| `explicit`, `implicit`

| NonImplicitAssociationMethodNames
| `<none>`
| 
|===

[#references-factorybotassociationstyle]
=== References

* https://www.rubydoc.info/gems/rubocop-factory_bot/RuboCop/Cop/FactoryBot/AssociationStyle

[#factorybotattributedefinedstatically]
== FactoryBot/AttributeDefinedStatically

|===
| Enabled by default | Safe | Supports autocorrection | Version Added | Version Changed

| Enabled
| Yes
| Always
| 1.28
| 2.24
|===

Always declare attribute values as blocks.

[#examples-factorybotattributedefinedstatically]
=== Examples

[source,ruby]
----
# bad
kind [:active, :rejected].sample

# good
kind { [:active, :rejected].sample }

# bad
closed_at 1.day.from_now

# good
closed_at { 1.day.from_now }

# bad
count 1

# good
count { 1 }
----

[#references-factorybotattributedefinedstatically]
=== References

* https://www.rubydoc.info/gems/rubocop-factory_bot/RuboCop/Cop/FactoryBot/AttributeDefinedStatically

[#factorybotconsistentparenthesesstyle]
== FactoryBot/ConsistentParenthesesStyle

|===
| Enabled by default | Safe | Supports autocorrection | Version Added | Version Changed

| Pending
| Yes
| Always
| 2.14
| 2.23
|===

Use a consistent style for parentheses in factory_bot calls.

[#examples-factorybotconsistentparenthesesstyle]
=== Examples

[#_enforcedstyle_-require_parentheses_-_default_-factorybotconsistentparenthesesstyle]
==== `EnforcedStyle: require_parentheses` (default)

[source,ruby]
----
# bad
create :user
build :login

# good
create(:user)
build(:login)
----

[#_enforcedstyle_-omit_parentheses_-factorybotconsistentparenthesesstyle]
==== `EnforcedStyle: omit_parentheses`

[source,ruby]
----
# bad
create(:user)
build(:login)

# good
create :user
build :login

# also good
# when method name and first argument are not on same line
create(
  :user
)
build(
  :user,
  name: 'foo'
)
----

[#_explicitonly_-false_-_default_-factorybotconsistentparenthesesstyle]
==== `ExplicitOnly: false` (default)

[source,ruby]
----
# bad - with `EnforcedStyle: require_parentheses`
FactoryBot.create :user
build :user

# good - with `EnforcedStyle: require_parentheses`
FactoryBot.create(:user)
build(:user)
----

[#_explicitonly_-true_-factorybotconsistentparenthesesstyle]
==== `ExplicitOnly: true`

[source,ruby]
----
# bad - with `EnforcedStyle: require_parentheses`
FactoryBot.create :user
FactoryBot.build :user

# good - with `EnforcedStyle: require_parentheses`
FactoryBot.create(:user)
FactoryBot.build(:user)
create :user
build :user
----

[#configurable-attributes-factorybotconsistentparenthesesstyle]
=== Configurable attributes

|===
| Name | Default value | Configurable values

| Include
| `+**/*_spec.rb+`, `+**/spec/**/*+`, `+**/test/**/*+`, `+**/features/support/factories/**/*.rb+`
| Array

| EnforcedStyle
| `require_parentheses`
| `require_parentheses`, `omit_parentheses`

| ExplicitOnly
| `false`
| Boolean
|===

[#references-factorybotconsistentparenthesesstyle]
=== References

* https://www.rubydoc.info/gems/rubocop-factory_bot/RuboCop/Cop/FactoryBot/ConsistentParenthesesStyle

[#factorybotcreatelist]
== FactoryBot/CreateList

|===
| Enabled by default | Safe | Supports autocorrection | Version Added | Version Changed

| Enabled
| Yes
| Command-line only (Unsafe)
| 1.25
| 2.26
|===

Enforce consistent style for repeated factory creation.

This cop can be configured using the `EnforcedStyle` option

[#safety-factorybotcreatelist]
=== Safety

This cop's autocorrection is unsafe because replacing `n.times` to
`create_list` changes its returned value.

[#examples-factorybotcreatelist]
=== Examples

[#_enforcedstyle_-create_list_-_default_-factorybotcreatelist]
==== `EnforcedStyle: create_list` (default)

[source,ruby]
----
# bad
3.times { create :user }
3.times.map { create :user }
[create(:user), create(:user), create(:user)]
Array.new(3) { create :user }

# good
create_list :user, 3

# bad
3.times { create :user, age: 18 }

# good - index is used to alter the created models attributes
3.times { |n| create :user, age: n }

# good - contains a method call, may return different values
3.times { create :user, age: rand }
----

[#_enforcedstyle_-n_times_-factorybotcreatelist]
==== `EnforcedStyle: n_times`

[source,ruby]
----
# bad
create_list :user, 3
[create(:user), create(:user), create(:user)]

# good
3.times.map { create :user }
----

[#_explicitonly_-false_-_default_-factorybotcreatelist]
==== `ExplicitOnly: false` (default)

[source,ruby]
----
# bad - with `EnforcedStyle: create_list`
3.times { FactoryBot.create :user }
3.times { create :user }

# good - with `EnforcedStyle: create_list`
FactoryBot.create_list :user, 3
create_list :user, 3
----

[#_explicitonly_-true_-factorybotcreatelist]
==== `ExplicitOnly: true`

[source,ruby]
----
# bad - with `EnforcedStyle: create_list`
3.times { FactoryBot.create :user }

# good - with `EnforcedStyle: create_list`
FactoryBot.create_list :user, 3
create_list :user, 3
3.times { create :user }
----

[#configurable-attributes-factorybotcreatelist]
=== Configurable attributes

|===
| Name | Default value | Configurable values

| Include
| `+**/*_spec.rb+`, `+**/spec/**/*+`, `+**/test/**/*+`, `+**/features/support/factories/**/*.rb+`
| Array

| EnforcedStyle
| `create_list`
| `create_list`, `n_times`

| ExplicitOnly
| `false`
| Boolean
|===

[#references-factorybotcreatelist]
=== References

* https://www.rubydoc.info/gems/rubocop-factory_bot/RuboCop/Cop/FactoryBot/CreateList

[#factorybotexcessivecreatelist]
== FactoryBot/ExcessiveCreateList

|===
| Enabled by default | Safe | Supports autocorrection | Version Added | Version Changed

| Pending
| Yes
| No
| 2.25
| -
|===

Limit the number of models created in a list.

[#examples-factorybotexcessivecreatelist]
=== Examples

[#_maxamount_-10_-_default_-factorybotexcessivecreatelist]
==== `MaxAmount: 10` (default)

[source,ruby]
----
# We do not allow more than 10 items to be created

# bad
create_list(:merge_request, 1000, state: :opened)

# good
create_list(:merge_request, 10, state: :opened)
----

[#_maxamount_-20_-factorybotexcessivecreatelist]
==== `MaxAmount: 20`

[source,ruby]
----
# We do not allow more than 20 items to be created

# bad
create_list(:merge_request, 1000, state: :opened)

# good
create_list(:merge_request, 15, state: :opened)
----

[#configurable-attributes-factorybotexcessivecreatelist]
=== Configurable attributes

|===
| Name | Default value | Configurable values

| Include
| `+**/*_spec.rb+`, `+**/spec/**/*+`, `+**/test/**/*+`, `+**/features/support/factories/**/*.rb+`
| Array

| MaxAmount
| `10`
| Integer
|===

[#references-factorybotexcessivecreatelist]
=== References

* https://www.rubydoc.info/gems/rubocop-factory_bot/RuboCop/Cop/FactoryBot/ExcessiveCreateList

[#factorybotfactoryassociationwithstrategy]
== FactoryBot/FactoryAssociationWithStrategy

|===
| Enabled by default | Safe | Supports autocorrection | Version Added | Version Changed

| Pending
| Yes
| Always (Unsafe)
| 2.23
| <<next>>
|===

Avoid hard-coding the strategy when defining an association.

[#safety-factorybotfactoryassociationwithstrategy]
=== Safety

This cop's autocorrection is unsafe because it changes the strategy.

[#examples-factorybotfactoryassociationwithstrategy]
=== Examples

[source,ruby]
----
# bad
factory :article do
  user { create(:user) }
end

# good - implicit
factory :article do
  user
end

# good - explicit
factory :article do
  association :user
end

# good - inline
factory :article do
  user { association(:user) }
end
----

[#configurable-attributes-factorybotfactoryassociationwithstrategy]
=== Configurable attributes

|===
| Name | Default value | Configurable values

| Include
| `+**/*_spec.rb+`, `+**/spec/**/*+`, `+**/test/**/*+`, `+**/features/support/factories/**/*.rb+`
| Array
|===

[#references-factorybotfactoryassociationwithstrategy]
=== References

* https://www.rubydoc.info/gems/rubocop-factory_bot/RuboCop/Cop/FactoryBot/FactoryAssociationWithStrategy

[#factorybotfactoryclassname]
== FactoryBot/FactoryClassName

|===
| Enabled by default | Safe | Supports autocorrection | Version Added | Version Changed

| Enabled
| Yes
| Always
| 1.37
| 2.24
|===

Use string value when setting the class attribute explicitly.

This cop would promote faster tests by lazy-loading of
application files. Also, this could help you suppress potential bugs
in combination with external libraries by avoiding a preload of
application files from the factory files.

[#examples-factorybotfactoryclassname]
=== Examples

[source,ruby]
----
# bad
factory :foo, class: Foo do
end

# good
factory :foo, class: 'Foo' do
end
----

[#references-factorybotfactoryclassname]
=== References

* https://www.rubydoc.info/gems/rubocop-factory_bot/RuboCop/Cop/FactoryBot/FactoryClassName

[#factorybotfactorynamestyle]
== FactoryBot/FactoryNameStyle

|===
| Enabled by default | Safe | Supports autocorrection | Version Added | Version Changed

| Pending
| Yes
| Always
| 2.16
| 2.23
|===

Enforce consistent style for factory names.

[#examples-factorybotfactorynamestyle]
=== Examples

[#_enforcedstyle_-symbol_-_default_-factorybotfactorynamestyle]
==== `EnforcedStyle: symbol` (default)

[source,ruby]
----
# bad
create('user')
build "user", username: "NAME"

# good
create(:user)
build :user, username: "NAME"

# good - namespaced models
create('users/internal')
----

[#_enforcedstyle_-string_-factorybotfactorynamestyle]
==== `EnforcedStyle: string`

[source,ruby]
----
# bad
create(:user)
build :user, username: "NAME"

# good
create('user')
build "user", username: "NAME"
----

[#_explicitonly_-false_-_default_-factorybotfactorynamestyle]
==== `ExplicitOnly: false` (default)

[source,ruby]
----
# bad - with `EnforcedStyle: symbol`
FactoryBot.create('user')
create('user')

# good - with `EnforcedStyle: symbol`
FactoryBot.create(:user)
create(:user)
----

[#_explicitonly_-true_-factorybotfactorynamestyle]
==== `ExplicitOnly: true`

[source,ruby]
----
# bad - with `EnforcedStyle: symbol`
FactoryBot.create(:user)
FactoryBot.build "user", username: "NAME"

# good - with `EnforcedStyle: symbol`
FactoryBot.create('user')
FactoryBot.build "user", username: "NAME"
FactoryBot.create(:user)
create(:user)
----

[#configurable-attributes-factorybotfactorynamestyle]
=== Configurable attributes

|===
| Name | Default value | Configurable values

| Include
| `+**/*_spec.rb+`, `+**/spec/**/*+`, `+**/test/**/*+`, `+**/features/support/factories/**/*.rb+`
| Array

| EnforcedStyle
| `symbol`
| `symbol`, `string`

| ExplicitOnly
| `false`
| Boolean
|===

[#references-factorybotfactorynamestyle]
=== References

* https://www.rubydoc.info/gems/rubocop-factory_bot/RuboCop/Cop/FactoryBot/FactoryNameStyle

[#factorybotidsequence]
== FactoryBot/IdSequence

|===
| Enabled by default | Safe | Supports autocorrection | Version Added | Version Changed

| Pending
| Yes
| Always
| 2.24
| -
|===

Do not create a FactoryBot sequence for an id column.

[#examples-factorybotidsequence]
=== Examples

[source,ruby]
----
# bad - can lead to conflicts between FactoryBot and DB sequences
factory :foo do
  sequence :id
end

# good - a non-id column
factory :foo do
  sequence :some_non_id_column
end
----

[#references-factorybotidsequence]
=== References

* https://www.rubydoc.info/gems/rubocop-factory_bot/RuboCop/Cop/FactoryBot/IdSequence

[#factorybotredundantfactoryoption]
== FactoryBot/RedundantFactoryOption

|===
| Enabled by default | Safe | Supports autocorrection | Version Added | Version Changed

| Pending
| Yes
| Always
| 2.23
| -
|===

Remove redundant `factory` option.

[#examples-factorybotredundantfactoryoption]
=== Examples

[source,ruby]
----
# bad
association :user, factory: :user

# good
association :user
----

[#configurable-attributes-factorybotredundantfactoryoption]
=== Configurable attributes

|===
| Name | Default value | Configurable values

| Include
| `+**/*_spec.rb+`, `+**/spec/**/*+`, `+**/test/**/*+`, `+**/features/support/factories/**/*.rb+`
| Array
|===

[#references-factorybotredundantfactoryoption]
=== References

* https://www.rubydoc.info/gems/rubocop-factory_bot/RuboCop/Cop/FactoryBot/RedundantFactoryOption

[#factorybotsyntaxmethods]
== FactoryBot/SyntaxMethods

|===
| Enabled by default | Safe | Supports autocorrection | Version Added | Version Changed

| Pending
| Yes
| Always (Unsafe)
| 2.7
| -
|===

Use shorthands from `FactoryBot::Syntax::Methods` in your specs.

[#safety-factorybotsyntaxmethods]
=== Safety

The autocorrection is marked as unsafe because the cop
cannot verify whether you already include
`FactoryBot::Syntax::Methods` in your test suite.

If you're using Rails, add the following configuration to
`spec/support/factory_bot.rb` and be sure to require that file in
`rails_helper.rb`:

[source,ruby]
----
RSpec.configure do |config|
  config.include FactoryBot::Syntax::Methods
end
----

If you're not using Rails:

[source,ruby]
----
RSpec.configure do |config|
  config.include FactoryBot::Syntax::Methods

  config.before(:suite) do
    FactoryBot.find_definitions
  end
end
----

[#examples-factorybotsyntaxmethods]
=== Examples

[source,ruby]
----
# bad
FactoryBot.create(:bar)
FactoryBot.build(:bar)
FactoryBot.attributes_for(:bar)

# good
create(:bar)
build(:bar)
attributes_for(:bar)
----

[#configurable-attributes-factorybotsyntaxmethods]
=== Configurable attributes

|===
| Name | Default value | Configurable values

| Include
| `+**/*_spec.rb+`, `+**/spec/**/*+`, `+**/test/**/*+`, `+**/features/support/factories/**/*.rb+`
| Array
|===

[#references-factorybotsyntaxmethods]
=== References

* https://www.rubydoc.info/gems/rubocop-factory_bot/RuboCop/Cop/FactoryBot/SyntaxMethods
